<!DOCTYPE html>
<html lang="tr">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>🎮 Oyun Merkezi</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      padding: 20px;
      position: relative;
      overflow-x: hidden;
    }

    body::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: 
        radial-gradient(circle at 20% 80%, rgba(120, 119, 198, 0.3) 0%, transparent 50%),
        radial-gradient(circle at 80% 20%, rgba(255, 119, 198, 0.3) 0%, transparent 50%),
        radial-gradient(circle at 40% 40%, rgba(120, 219, 255, 0.2) 0%, transparent 50%);
      z-index: -1;
    }

    .game-container {
      background: rgba(255, 255, 255, 0.95);
      border-radius: 24px;
      padding: 35px;
      box-shadow: 
        0 25px 50px rgba(0, 0, 0, 0.15),
        0 0 0 1px rgba(255, 255, 255, 0.05);
      backdrop-filter: blur(20px);
      max-width: 750px;
      width: 100%;
      min-height: 650px;
      position: relative;
      border: 1px solid rgba(255, 255, 255, 0.2);
    }

    .header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 35px;
      padding-bottom: 20px;
      border-bottom: 2px solid rgba(102, 126, 234, 0.1);
      position: relative;
    }

    .header::after {
      content: '';
      position: absolute;
      bottom: -2px;
      left: 0;
      width: 60px;
      height: 2px;
      background: linear-gradient(90deg, #667eea, #764ba2);
      border-radius: 1px;
    }

    .menu-container {
      display: flex;
      align-items: center;
      gap: 20px;
      position: relative;
    }

    .game-menu {
      position: relative;
    }

    .menu-btn {
      background: linear-gradient(135deg, #4facfe, #00f2fe);
      color: white;
      border: none;
      padding: 12px 24px;
      border-radius: 12px;
      cursor: pointer;
      font-weight: bold;
      font-size: 0.95em;
      transition: all 0.3s ease;
      box-shadow: 0 4px 15px rgba(79, 172, 254, 0.3);
    }

    .menu-btn:hover {
      transform: translateY(-3px);
      box-shadow: 0 8px 25px rgba(79, 172, 254, 0.4);
    }

    .menu-dropdown {
      position: absolute;
      top: calc(100% + 10px);
      left: 0;
      display: none;
      flex-direction: column;
      background: white;
      border-radius: 16px;
      box-shadow: 0 20px 40px rgba(0, 0, 0, 0.15);
      z-index: 1000;
      min-width: 220px;
      overflow: hidden;
      border: 1px solid rgba(102, 126, 234, 0.1);
    }

    .menu-dropdown.show {
      display: flex;
      animation: dropdownSlide 0.3s ease;
    }

    @keyframes dropdownSlide {
      from {
        opacity: 0;
        transform: translateY(-10px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .menu-item {
      padding: 15px 24px;
      cursor: pointer;
      transition: all 0.2s ease;
      font-weight: 500;
      position: relative;
    }

    .menu-item:hover {
      background: rgba(102, 126, 234, 0.05);
      padding-left: 32px;
    }

    .menu-item.active {
      background: linear-gradient(90deg, rgba(102, 126, 234, 0.1), rgba(102, 126, 234, 0.05));
      color: #667eea;
      font-weight: bold;
    }

    .menu-item.active::before {
      content: '';
      position: absolute;
      left: 0;
      top: 0;
      bottom: 0;
      width: 3px;
      background: linear-gradient(135deg, #667eea, #764ba2);
    }

    .language-switcher {
      display: flex;
      gap: 12px;
      background: rgba(255, 255, 255, 0.5);
      padding: 4px;
      border-radius: 12px;
      border: 1px solid rgba(102, 126, 234, 0.2);
    }

    .lang-btn {
      padding: 8px 16px;
      border: none;
      border-radius: 8px;
      background: transparent;
      color: #667eea;
      cursor: pointer;
      transition: all 0.3s ease;
      font-weight: bold;
      font-size: 0.9em;
    }

    .lang-btn.active {
      background: linear-gradient(135deg, #667eea, #764ba2);
      color: white;
      box-shadow: 0 2px 8px rgba(102, 126, 234, 0.3);
    }

    h1 {
      color: #333;
      font-size: 2.2em;
      text-align: center;
      margin-bottom: 25px;
      font-weight: 700;
      background: linear-gradient(135deg, #667eea, #764ba2);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    .word-game,
    .memory-game,
    .math-game,
    .snake-game {
      display: none;
    }

    .hangman-display {
      width: 200px;
      height: 240px;
      margin: 25px auto;
      border: 3px solid #667eea;
      border-radius: 20px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 4em;
      background: linear-gradient(135deg, rgba(102, 126, 234, 0.05), rgba(118, 75, 162, 0.05));
      box-shadow: inset 0 2px 4px rgba(102, 126, 234, 0.1);
    }

    .word-display {
      font-size: 2.4em;
      font-weight: bold;
      letter-spacing: 10px;
      margin: 30px 0;
      color: #333;
      min-height: 70px;
      display: flex;
      justify-content: center;
      flex-wrap: wrap;
      align-items: center;
    }

    .letter-box {
      display: inline-block;
      width: 50px;
      height: 50px;
      border-bottom: 4px solid #667eea;
      margin: 0 5px;
      line-height: 50px;
      border-radius: 4px 4px 0 0;
      transition: all 0.3s ease;
    }

    .letter-box:not(:empty) {
      background: rgba(102, 126, 234, 0.1);
      color: #667eea;
      font-weight: bold;
    }

    .alphabet {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(45px, 1fr));
      gap: 10px;
      margin: 30px auto;
      max-width: 550px;
    }

    .letter-btn {
      padding: 12px;
      border: none;
      border-radius: 10px;
      background: linear-gradient(135deg, #667eea, #764ba2);
      color: white;
      font-weight: bold;
      cursor: pointer;
      transition: all 0.3s ease;
      box-shadow: 0 2px 8px rgba(102, 126, 234, 0.3);
    }

    .letter-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 15px rgba(102, 126, 234, 0.4);
    }

    .letter-btn:disabled {
      background: #ccc;
      cursor: not-allowed;
      transform: none;
      box-shadow: none;
    }

    .letter-btn.correct {
      background: linear-gradient(135deg, #4caf50, #45a049);
      box-shadow: 0 4px 15px rgba(76, 175, 80, 0.3);
    }

    .letter-btn.wrong {
      background: linear-gradient(135deg, #f44336, #da190b);
      box-shadow: 0 4px 15px rgba(244, 67, 54, 0.3);
    }

    .memory-grid {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 15px;
      max-width: 450px;
      margin: 25px auto;
    }

    .memory-card {
      aspect-ratio: 1;
      background: linear-gradient(135deg, #667eea, #764ba2);
      border-radius: 15px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 2.2em;
      cursor: pointer;
      position: relative;
      color: transparent;
      transition: all 0.4s ease;
      box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
    }

    .memory-card:hover {
      transform: scale(1.05) rotateY(5deg);
      box-shadow: 0 8px 25px rgba(102, 126, 234, 0.4);
    }

    .memory-card.flipped {
      background: white;
      border: 3px solid #667eea;
      color: #333;
      transform: rotateY(180deg);
    }

    .memory-card.matched {
      background: linear-gradient(135deg, #4caf50, #45a049);
      cursor: not-allowed;
      color: white;
      box-shadow: 0 6px 20px rgba(76, 175, 80, 0.4);
    }

    .math-question {
      font-size: 2.8em;
      font-weight: bold;
      margin: 35px 0;
      color: #333;
      text-align: center;
      background: linear-gradient(135deg, #667eea, #764ba2);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    .math-input {
      font-size: 1.6em;
      padding: 18px;
      border: 3px solid #667eea;
      border-radius: 12px;
      text-align: center;
      width: 180px;
      margin: 0 15px;
      transition: all 0.3s ease;
      background: rgba(255, 255, 255, 0.9);
    }

    .math-input:focus {
      outline: none;
      border-color: #764ba2;
      box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.2);
      transform: scale(1.02);
    }

    .math-submit,
    .btn {
      font-size: 1.3em;
      padding: 14px 28px;
      background: linear-gradient(135deg, #667eea, #764ba2);
      color: white;
      border: none;
      border-radius: 12px;
      cursor: pointer;
      margin: 15px 10px;
      transition: all 0.3s ease;
      font-weight: 600;
      box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
    }

    .btn:hover,
    .math-submit:hover {
      transform: translateY(-3px);
      box-shadow: 0 8px 25px rgba(102, 126, 234, 0.4);
    }

    /* YILAN OYUNU İYİLEŞTİRMELERİ */
    .snake-game-container {
      display: flex;
      flex-direction: column;
      align-items: center;
      background: linear-gradient(135deg, rgba(102, 126, 234, 0.05), rgba(118, 75, 162, 0.05));
      border-radius: 20px;
      padding: 25px;
      margin: 20px 0;
    }

    .snake-canvas {
      border: 4px solid #667eea;
      border-radius: 16px;
      margin: 20px auto;
      display: block;
      background: linear-gradient(135deg, #f8f9ff, #f0f4ff);
      box-shadow: 
        0 10px 30px rgba(102, 126, 234, 0.3),
        inset 0 1px 0 rgba(255, 255, 255, 0.5);
      position: relative;
    }

    .snake-canvas::before {
      content: '';
      position: absolute;
      top: -4px;
      left: -4px;
      right: -4px;
      bottom: -4px;
      background: linear-gradient(45deg, #667eea, #764ba2, #667eea);
      border-radius: 20px;
      z-index: -1;
      animation: borderGlow 3s ease-in-out infinite alternate;
    }

    @keyframes borderGlow {
      0% { opacity: 0.5; }
      100% { opacity: 1; }
    }

    .snake-controls {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 10px;
      margin: 20px 0;
      max-width: 200px;
    }

    .control-btn {
      padding: 12px;
      border: 2px solid #667eea;
      border-radius: 10px;
      background: rgba(102, 126, 234, 0.1);
      color: #667eea;
      cursor: pointer;
      transition: all 0.2s ease;
      font-size: 1.2em;
      font-weight: bold;
    }

    .control-btn:hover {
      background: rgba(102, 126, 234, 0.2);
      transform: scale(1.05);
    }

    .control-btn:active {
      transform: scale(0.95);
      background: rgba(102, 126, 234, 0.3);
    }

    .control-btn.up { grid-column: 2; }
    .control-btn.left { grid-column: 1; grid-row: 2; }
    .control-btn.down { grid-column: 2; grid-row: 2; }
    .control-btn.right { grid-column: 3; grid-row: 2; }

    .snake-stats {
      display: flex;
      justify-content: space-around;
      align-items: center;
      background: rgba(255, 255, 255, 0.8);
      border-radius: 15px;
      padding: 15px;
      margin: 15px 0;
      min-width: 300px;
      backdrop-filter: blur(10px);
      border: 1px solid rgba(102, 126, 234, 0.2);
    }

    .stat-item {
      text-align: center;
      padding: 0 15px;
    }

    .stat-label {
      font-size: 0.9em;
      color: #666;
      font-weight: 500;
    }

    .stat-value {
      font-size: 1.4em;
      font-weight: bold;
      color: #667eea;
      margin-top: 5px;
    }

    .game-info {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin: 25px 0;
      font-size: 1.2em;
      font-weight: bold;
      background: rgba(255, 255, 255, 0.6);
      padding: 15px 25px;
      border-radius: 15px;
      backdrop-filter: blur(10px);
    }

    .score {
      color: #667eea;
      font-size: 1.1em;
    }

    .win-message {
      color: #4caf50;
      font-weight: bold;
      animation: bounce 1s infinite;
      font-size: 1.1em;
      text-shadow: 0 2px 4px rgba(76, 175, 80, 0.3);
    }

    .lose-message {
      color: #f44336;
      font-weight: bold;
      font-size: 1.1em;
      text-shadow: 0 2px 4px rgba(244, 67, 54, 0.3);
    }

    @keyframes bounce {
      0%, 20%, 50%, 80%, 100% {
        transform: translateY(0);
      }
      40% {
        transform: translateY(-10px);
      }
      60% {
        transform: translateY(-5px);
      }
    }

    .category-info {
      margin: 20px 0;
      font-style: italic;
      color: #666;
      background: linear-gradient(135deg, rgba(102, 126, 234, 0.1), rgba(118, 75, 162, 0.1));
      padding: 12px 20px;
      border-radius: 20px;
      display: inline-block;
      text-align: center;
      border: 1px solid rgba(102, 126, 234, 0.2);
      font-weight: 500;
    }

    .controls {
      text-align: center;
      margin-top: 25px;
    }

    .game-message {
      text-align: center;
      margin: 20px 0;
      min-height: 30px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    /* Responsive tasarım */
    @media (max-width: 768px) {
      .game-container {
        padding: 25px;
        margin: 10px;
      }
      
      .snake-canvas {
        width: 300px;
        height: 300px;
      }
      
      .snake-stats {
        min-width: 250px;
        flex-direction: column;
        gap: 10px;
      }
      
      .stat-item {
        padding: 5px;
      }
    }

    /* Özel animasyonlar */
    .fadeIn {
      animation: fadeIn 0.5s ease;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }

    /* Parçacık efekti (opsiyonel) */
    .particle {
      position: absolute;
      width: 4px;
      height: 4px;
      background: radial-gradient(circle, #667eea, transparent);
      border-radius: 50%;
      pointer-events: none;
      animation: particle-float 2s linear infinite;
    }

    @keyframes particle-float {
      0% { transform: translateY(0) rotate(0deg); opacity: 1; }
      100% { transform: translateY(-100px) rotate(360deg); opacity: 0; }
    }
  </style>
</head>

<body>
  <div class="game-container fadeIn">
    <div class="header">
      <div class="menu-container">
        <div class="game-menu">
          <button class="menu-btn" id="menuBtn">🎮 Oyunlar</button>
          <div class="menu-dropdown" id="menuDropdown">
            <div class="menu-item active" data-game="word">📝 Kelime Tahmin</div>
            <div class="menu-item" data-game="memory">🧠 Hafıza Oyunu</div>
            <div class="menu-item" data-game="math">🔢 Matematik</div>
            <div class="menu-item" data-game="snake">🐍 Yılan Oyunu</div>
          </div>
        </div>
      </div>
      <div class="language-switcher">
        <button class="lang-btn active" data-lang="tr">🇹🇷</button>
        <button class="lang-btn" data-lang="ru">🇷🇺</button>
      </div>
    </div>
    <h1 id="gameTitle">Kelime Tahmin Oyunu</h1>

    <!-- Word Game -->
    <div class="word-game" id="wordGame">
      <div class="hangman-display" id="hangman">😊</div>
      <div class="category-info" id="category"></div>
      <div class="word-display" id="wordDisplay"></div>
      <div class="game-info">
        <div>❌ Yanlış: <span id="wrongCount">0</span>/6</div>
        <div class="score">🏆 Skor: <span id="score">0</span></div>
      </div>
      <div class="game-message" id="gameMessage"></div>
      <div class="alphabet" id="alphabet"></div>
      <div class="controls"><button class="btn" id="newGameBtn">🎯 Yeni Oyun</button></div>
    </div>

    <!-- Memory Game -->
    <div class="memory-game" id="memoryGame">
      <div class="game-info">
        <div>🎯 Hamle: <span id="moves">0</span></div>
        <div class="score">🏆 Skor: <span id="memoryScore">0</span></div>
      </div>
      <div class="memory-grid" id="memoryGrid"></div>
      <div class="game-message" id="memoryMessage"></div>
      <div class="controls"><button class="btn" id="newMemoryBtn">🔄 Yeni Oyun</button></div>
    </div>

    <!-- Math Game -->
    <div class="math-game" id="mathGame">
      <div class="math-question" id="mathQuestion"></div>
      <div>
        <input type="number" class="math-input" id="mathInput" placeholder="?">
        <button class="math-submit" id="mathSubmit">✓ Kontrol Et</button>
      </div>
      <div class="game-info">
        <div>✅ Doğru: <span id="mathCorrect">0</span></div>
        <div class="score">🏆 Skor: <span id="mathScore">0</span></div>
      </div>
      <div class="game-message" id="mathMessage"></div>
      <div class="controls"><button class="btn" id="newMathBtn">🎲 Yeni Oyun</button></div>
    </div>

    <!-- Snake Game (İyileştirilmiş) -->
    <div class="snake-game" id="snakeGame">
      <div class="snake-game-container">
        <canvas class="snake-canvas" id="snakeCanvas" width="400" height="400"></canvas>
        
        <div class="snake-stats">
          <div class="stat-item">
            <div class="stat-label">Skor</div>
            <div class="stat-value" id="snakeScore">0</div>
          </div>
          <div class="stat-item">
            <div class="stat-label">Uzunluk</div>
            <div class="stat-value" id="snakeLength">1</div>
          </div>
          <div class="stat-item">
            <div class="stat-label">En Yüksek</div>
            <div class="stat-value" id="snakeHighScore">0</div>
          </div>
        </div>

        <div class="snake-controls">
          <div class="control-btn up" id="upBtn">⬆️</div>
          <div class="control-btn left" id="leftBtn">⬅️</div>
          <div class="control-btn down" id="downBtn">⬇️</div>
          <div class="control-btn right" id="rightBtn">➡️</div>
        </div>
      </div>
      
      <div class="game-message" id="snakeMessage">🎮 Yön tuşları veya kontrolleri kullanarak oynayın</div>
      <div class="controls"><button class="btn" id="newSnakeBtn">🐍 Yeni Oyun</button></div>
    </div>
  </div>

  <script>
    // --- LANGUAGE DATA ---
    const languages = {
      tr: { 
        menu: '🎮 Oyunlar', 
        wordGame: '📝 Kelime Tahmin', 
        memoryGame: '🧠 Hafıza Oyunu', 
        mathGame: '🔢 Matematik', 
        snakeGame: '🐍 Yılan Oyunu', 
        titles: { 
          word: 'Kelime Tahmin Oyunu', 
          memory: 'Hafıza Oyunu', 
          math: 'Matematik Oyunu', 
          snake: 'Yılan Oyunu' 
        }, 
        wrong: '❌ Yanlış', 
        score: '🏆 Skor', 
        moves: '🎯 Hamle', 
        correct: '✅ Doğru', 
        newGame: 'Yeni Oyun', 
        category: '📂 Kategori', 
        checkAnswer: '✓ Kontrol Et', 
        snakeControls: '🎮 Yön tuşları veya kontrolleri kullanarak oynayın', 
        winMessage: '🎉 Tebrikler! Kazandınız!', 
        loseMessage: '😔 Kaybettiniz! Kelime', 
        memoryWin: '🌟 Harika! Tüm kartları eşleştirdiniz!', 
        mathCorrect: '✅ Doğru!', 
        mathWrong: '❌ Yanlış! Tekrar deneyin.', 
        gameOver: '💀 Oyun Bitti!' 
      },
      ru: { 
        menu: '🎮 Игры', 
        wordGame: '📝 Угадай слово', 
        memoryGame: '🧠 Память', 
        mathGame: '🔢 Математика', 
        snakeGame: '🐍 Змейка', 
        titles: { 
          word: 'Игра в слова', 
          memory: 'Игра на память', 
          math: 'Математическая игра', 
          snake: 'Игра Змейка' 
        }, 
        wrong: '❌ Ошибок', 
        score: '🏆 Очки', 
        moves: '🎯 Ходов', 
        correct: '✅ Верно', 
        newGame: 'Новая игра', 
        category: '📂 Категория', 
        checkAnswer: '✓ Проверить', 
        snakeControls: '🎮 Играйте стрелками или кнопками', 
        winMessage: '🎉 Поздравляем! Вы выиграли!', 
        loseMessage: '😔 Вы проиграли! Слово', 
        memoryWin: '🌟 Отлично! Все карты найдены!', 
        mathCorrect: '✅ Правильно!', 
        mathWrong: '❌ Неправильно! Попробуйте ещё.', 
        gameOver: '💀 Игра окончена!' 
      }
    };

    const wordCategories = {
      tr: { '🦁 Hayvanlar': ['ASLAN', 'KAPLAN', 'ZÜRAF', 'FİL', 'KARTAL', 'KÖPEK', 'KEDİ', 'TAVŞAN', 'AYAK', 'BALINA'] },
      ru: { '🦁 Животные': ['ЛЕВ', 'ТИГР', 'СЛОН', 'ЖИРАФ', 'ОРЁЛ', 'СОБАКА', 'КОШКА', 'ЗАЯЦ', 'МЕДВЕДЬ', 'КИТ'] }
    };
    
    const alphabets = { 
      tr: 'ABCÇDEFGHIİJKLMNOÖPRSŞTUÜVYZ'.split(''), 
      ru: 'АБВГДЕЁЖЗИЙКЛМНОПРСТУФХЦЧШЩЪЫЬЭЮЯ'.split('') 
    };
    
    const hangmanStages = ['😊', '😐', '😟', '😰', '😵', '💀', '☠️'];
    const memoryEmojis = ['🎮', '🎯', '🎲', '🎪', '🎨', '🎭', '🎸', '🎺'];

    // --- GAME STATE ---
    let currentLanguage = 'tr', currentGameType = 'word';
    let snakeHighScore = parseInt(localStorage.getItem('snakeHighScore') || '0');
    
    let gameStates = {
      word: { currentWord: '', currentCategory: '', guessedLetters: [], wrongGuesses: 0, score: 0, gameOver: false },
      memory: { cards: [], flippedCards: [], moves: 0, score: 0, gameOver: false },
      math: { currentAnswer: 0, correct: 0, score: 0 },
      snake: { snake: [{ x: 200, y: 200 }], food: { x: 0, y: 0 }, dx: 20, dy: 0, score: 0, gameOver: false, gameLoop: null }
    };

    // --- INIT ---
    window.addEventListener('load', initGame);
    function initGame() {
      setupMenu();
      setupLanguage();
      setupSnakeControls();
      switchGame('word');
      document.getElementById('snakeHighScore').textContent = snakeHighScore;
    }

    // --- MENU ---
    function setupMenu() {
      const menuBtn = document.getElementById('menuBtn');
      const menuDropdown = document.getElementById('menuDropdown');
      menuBtn.onclick = e => {
        e.stopPropagation();
        menuDropdown.classList.toggle('show');
      };
      document.addEventListener('click', () => { menuDropdown.classList.remove('show'); });
      document.querySelectorAll('.menu-item').forEach(item => {
        item.onclick = () => {
          switchGame(item.dataset.game);
          document.querySelectorAll('.menu-item').forEach(i => i.classList.remove('active'));
          item.classList.add('active');
          menuDropdown.classList.remove('show');
        };
      });
    }

    // --- LANGUAGE ---
    function setupLanguage() {
      document.querySelectorAll('.lang-btn').forEach(btn => {
        btn.onclick = () => {
          currentLanguage = btn.dataset.lang;
          document.querySelectorAll('.lang-btn').forEach(b => b.classList.remove('active'));
          btn.classList.add('active');
          updateLanguage();
          // restart current game
          if (currentGameType === 'word') startNewWordGame();
          else if (currentGameType === 'memory') startNewMemoryGame();
          else if (currentGameType === 'math') startNewMathGame();
          else if (currentGameType === 'snake') startNewSnakeGame();
        };
      });
    }

    function updateLanguage() {
      const lang = languages[currentLanguage];
      document.getElementById('menuBtn').textContent = lang.menu;
      document.getElementById('gameTitle').textContent = lang.titles[currentGameType];
      
      // Update menu items
      const menuItems = document.querySelectorAll('.menu-item');
      menuItems[0].textContent = lang.wordGame;
      menuItems[1].textContent = lang.memoryGame;
      menuItems[2].textContent = lang.mathGame;
      menuItems[3].textContent = lang.snakeGame;
      
      if (currentGameType === 'word') {
        document.getElementById('wrongCount').previousSibling.textContent = lang.wrong + ': ';
        document.getElementById('score').previousSibling.textContent = lang.score + ': ';
        document.getElementById('newGameBtn').textContent = '🎯 ' + lang.newGame;
        document.getElementById('category').textContent = '';
      } else if (currentGameType === 'memory') {
        document.getElementById('moves').previousSibling.textContent = lang.moves + ': ';
        document.getElementById('memoryScore').previousSibling.textContent = lang.score + ': ';
        document.getElementById('newMemoryBtn').textContent = '🔄 ' + lang.newGame;
      } else if (currentGameType === 'math') {
        document.getElementById('mathCorrect').previousSibling.textContent = lang.correct + ': ';
        document.getElementById('mathScore').previousSibling.textContent = lang.score + ': ';
        document.getElementById('mathSubmit').textContent = lang.checkAnswer;
        document.getElementById('newMathBtn').textContent = '🎲 ' + lang.newGame;
      } else if (currentGameType === 'snake') {
        document.getElementById('snakeScore').previousSibling.textContent = '';
        document.getElementById('newSnakeBtn').textContent = '🐍 ' + lang.newGame;
        document.getElementById('snakeMessage').textContent = lang.snakeControls;
      }
    }

    // --- SWITCH GAME ---
    function switchGame(gameType) {
      currentGameType = gameType;
      document.querySelectorAll('.word-game,.memory-game,.math-game,.snake-game').forEach(g => g.style.display = 'none');
      document.getElementById(gameType + 'Game').style.display = 'block';
      document.getElementById(gameType + 'Game').classList.add('fadeIn');
      updateLanguage();
      if (gameType === 'word') startNewWordGame();
      else if (gameType === 'memory') startNewMemoryGame();
      else if (gameType === 'math') startNewMathGame();
      else if (gameType === 'snake') startNewSnakeGame();
    }

    // --- WORD GAME ---
    function createAlphabet() {
      const alphabetDiv = document.getElementById('alphabet');
      alphabetDiv.innerHTML = '';
      alphabets[currentLanguage].forEach(l => {
        const btn = document.createElement('button');
        btn.className = 'letter-btn';
        btn.textContent = l;
        btn.id = 'btn-' + l;
        btn.onclick = () => guessLetter(l);
        alphabetDiv.appendChild(btn);
      });
    }

    function startNewWordGame() {
      const state = gameStates.word;
      const categories = Object.keys(wordCategories[currentLanguage]);
      state.currentCategory = categories[Math.floor(Math.random() * categories.length)];
      const words = wordCategories[currentLanguage][state.currentCategory];
      state.currentWord = words[Math.floor(Math.random() * words.length)];
      state.guessedLetters = [];
      state.wrongGuesses = 0;
      state.gameOver = false;
      updateWordDisplay();
      updateHangman();
      createAlphabet();
      document.getElementById('gameMessage').textContent = '';
      document.getElementById('category').textContent = state.currentCategory;
      document.getElementById('score').textContent = state.score;
    }

    function updateWordDisplay() {
      const wordDisplay = document.getElementById('wordDisplay');
      wordDisplay.innerHTML = '';
      for (let l of gameStates.word.currentWord) {
        const box = document.createElement('div');
        box.className = 'letter-box';
        box.textContent = gameStates.word.guessedLetters.includes(l) ? l : '';
        wordDisplay.appendChild(box);
      }
    }

    function updateHangman() {
      document.getElementById('hangman').textContent = hangmanStages[gameStates.word.wrongGuesses];
      document.getElementById('wrongCount').textContent = gameStates.word.wrongGuesses;
    }

    function guessLetter(l) {
      const state = gameStates.word;
      if (state.gameOver || state.guessedLetters.includes(l)) return;
      state.guessedLetters.push(l);
      const btn = document.getElementById('btn-' + l);
      btn.disabled = true;
      if (state.currentWord.includes(l)) {
        btn.className = 'letter-btn correct';
        updateWordDisplay();
        checkWordWin();
      } else {
        btn.className = 'letter-btn wrong';
        state.wrongGuesses++;
        updateHangman();
        checkWordLose();
      }
    }

    function checkWordWin() {
      const state = gameStates.word;
      if (state.currentWord.split('').every(l => state.guessedLetters.includes(l))) {
        state.gameOver = true;
        state.score += (7 - state.wrongGuesses) * 10;
        document.getElementById('score').textContent = state.score;
        document.getElementById('gameMessage').innerHTML = '<div class="win-message">' + languages[currentLanguage].winMessage + '</div>';
        createParticles();
      }
    }

    function checkWordLose() {
      const state = gameStates.word;
      if (state.wrongGuesses >= 6) {
        state.gameOver = true;
        document.getElementById('gameMessage').innerHTML = '<div class="lose-message">' + languages[currentLanguage].loseMessage + ': ' + state.currentWord + '</div>';
      }
    }

    document.getElementById('newGameBtn').onclick = startNewWordGame;

    // --- MEMORY GAME ---
    function startNewMemoryGame() {
      const state = gameStates.memory;
      state.cards = []; state.flippedCards = []; state.moves = 0; state.gameOver = false;
      const cardSymbols = [...memoryEmojis.slice(0, 8), ...memoryEmojis.slice(0, 8)];
      cardSymbols.sort(() => Math.random() - 0.5);
      state.cards = cardSymbols.map((s, i) => ({ id: i, symbol: s, flipped: false, matched: false }));
      updateMemoryDisplay();
      document.getElementById('moves').textContent = state.moves;
      document.getElementById('memoryScore').textContent = state.score;
      document.getElementById('memoryMessage').textContent = '';
    }

    function updateMemoryDisplay() {
      const memoryGrid = document.getElementById('memoryGrid');
      memoryGrid.innerHTML = '';
      gameStates.memory.cards.forEach(card => {
        const c = document.createElement('div');
        c.className = 'memory-card' + (card.flipped || card.matched ? ' ' + (card.matched ? 'matched' : 'flipped') : '');
        c.textContent = (card.flipped || card.matched) ? card.symbol : '';
        c.id = 'card-' + card.id;
        c.onclick = () => flipCard(card.id);
        memoryGrid.appendChild(c);
      });
    }

    function flipCard(id) {
      const state = gameStates.memory;
      if (state.gameOver || state.flippedCards.length >= 2) return;
      const card = state.cards[id];
      if (card.flipped || card.matched) return;
      card.flipped = true; state.flippedCards.push(card);
      updateMemoryDisplay();
      if (state.flippedCards.length === 2) {
        state.moves++;
        document.getElementById('moves').textContent = state.moves;
        setTimeout(checkMemoryMatch, 1000);
      }
    }

    function checkMemoryMatch() {
      const state = gameStates.memory;
      const [c1, c2] = state.flippedCards;
      if (c1.symbol === c2.symbol) {
        c1.matched = c2.matched = true; 
        state.score += 10; 
        document.getElementById('memoryScore').textContent = state.score;
        if (state.cards.every(c => c.matched)) { 
          state.gameOver = true; 
          document.getElementById('memoryMessage').innerHTML = '<div class="win-message">' + languages[currentLanguage].memoryWin + '</div>';
          createParticles();
        }
      } else { 
        c1.flipped = c2.flipped = false; 
      }
      state.flippedCards = [];
      updateMemoryDisplay();
    }

    document.getElementById('newMemoryBtn').onclick = startNewMemoryGame;

    // --- MATH GAME ---
    function startNewMathGame() {
      const state = gameStates.math;
      state.correct = 0; state.score = 0;
      generateMathQuestion();
      document.getElementById('mathCorrect').textContent = state.correct;
      document.getElementById('mathScore').textContent = state.score;
      document.getElementById('mathMessage').textContent = '';
      document.getElementById('mathInput').value = '';
    }

    function generateMathQuestion() {
      const operations = ['+', '-', '×', '÷'];
      const op = operations[Math.floor(Math.random() * operations.length)];
      let n1, n2, ans;
      switch (op) {
        case '+': n1 = Math.floor(Math.random() * 50) + 1; n2 = Math.floor(Math.random() * 50) + 1; ans = n1 + n2; break;
        case '-': n1 = Math.floor(Math.random() * 50) + 20; n2 = Math.floor(Math.random() * n1); ans = n1 - n2; break;
        case '×': n1 = Math.floor(Math.random() * 12) + 1; n2 = Math.floor(Math.random() * 12) + 1; ans = n1 * n2; break;
        case '÷': ans = Math.floor(Math.random() * 12) + 1; n2 = Math.floor(Math.random() * 10) + 2; n1 = ans * n2; break;
      }
      gameStates.math.currentAnswer = ans;
      document.getElementById('mathQuestion').textContent = n1 + ' ' + op + ' ' + n2 + ' = ?';
    }

    function checkMathAnswer() {
      const userAns = parseInt(document.getElementById('mathInput').value);
      const correct = gameStates.math.currentAnswer;
      if (userAns === correct) {
        gameStates.math.correct++; 
        gameStates.math.score += 10;
        document.getElementById('mathCorrect').textContent = gameStates.math.correct;
        document.getElementById('mathScore').textContent = gameStates.math.score;
        document.getElementById('mathMessage').innerHTML = '<div class="win-message">' + languages[currentLanguage].mathCorrect + '</div>';
        createParticles();
        setTimeout(() => { 
          generateMathQuestion(); 
          document.getElementById('mathInput').value = ''; 
          document.getElementById('mathMessage').textContent = ''; 
        }, 1500);
      } else {
        document.getElementById('mathMessage').innerHTML = '<div class="lose-message">' + languages[currentLanguage].mathWrong + '</div>';
        setTimeout(() => { document.getElementById('mathMessage').textContent = ''; }, 2000);
      }
    }

    document.getElementById('mathSubmit').onclick = checkMathAnswer;
    document.getElementById('mathInput').addEventListener('keypress', function (e) { 
      if (e.key === 'Enter') checkMathAnswer(); 
    });
    document.getElementById('newMathBtn').onclick = startNewMathGame;

    // --- SNAKE GAME (İyileştirilmiş) ---
    function setupSnakeControls() {
      // Klavye kontrolleri
      document.addEventListener('keydown', function (e) {
        if (currentGameType !== 'snake' || gameStates.snake.gameOver) return;
        const state = gameStates.snake;
        switch (e.key) {
          case 'ArrowUp': 
            if (state.dy !== 20) { state.dx = 0; state.dy = -20; } 
            e.preventDefault(); 
            break;
          case 'ArrowDown': 
            if (state.dy !== -20) { state.dx = 0; state.dy = 20; } 
            e.preventDefault(); 
            break;
          case 'ArrowLeft': 
            if (state.dx !== 20) { state.dx = -20; state.dy = 0; } 
            e.preventDefault(); 
            break;
          case 'ArrowRight': 
            if (state.dx !== -20) { state.dx = 20; state.dy = 0; } 
            e.preventDefault(); 
            break;
        }
      });

      // Touch kontrolleri
      document.getElementById('upBtn').onclick = () => {
        const state = gameStates.snake;
        if (!state.gameOver && state.dy !== 20) { state.dx = 0; state.dy = -20; }
      };
      document.getElementById('downBtn').onclick = () => {
        const state = gameStates.snake;
        if (!state.gameOver && state.dy !== -20) { state.dx = 0; state.dy = 20; }
      };
      document.getElementById('leftBtn').onclick = () => {
        const state = gameStates.snake;
        if (!state.gameOver && state.dx !== 20) { state.dx = -20; state.dy = 0; }
      };
      document.getElementById('rightBtn').onclick = () => {
        const state = gameStates.snake;
        if (!state.gameOver && state.dx !== -20) { state.dx = 20; state.dy = 0; }
      };
    }

    function startNewSnakeGame() {
      const state = gameStates.snake;
      if (state.gameLoop) clearInterval(state.gameLoop);
      state.snake = [{ x: 200, y: 200 }]; 
      state.dx = 20; 
      state.dy = 0; 
      state.score = 0; 
      state.gameOver = false;
      generateFood();
      updateSnakeDisplay();
      document.getElementById('snakeMessage').textContent = languages[currentLanguage].snakeControls;
      state.gameLoop = setInterval(updateSnakeGame, 120);
    }

    function generateFood() {
      const state = gameStates.snake;
      do { 
        state.food.x = Math.floor(Math.random() * 20) * 20; 
        state.food.y = Math.floor(Math.random() * 20) * 20; 
      }
      while (state.snake.some(s => s.x === state.food.x && s.y === state.food.y));
    }

    function updateSnakeDisplay() {
      const state = gameStates.snake;
      document.getElementById('snakeScore').textContent = state.score;
      document.getElementById('snakeLength').textContent = state.snake.length;
      document.getElementById('snakeHighScore').textContent = snakeHighScore;
    }

    function updateSnakeGame() {
      const state = gameStates.snake;
      const canvas = document.getElementById('snakeCanvas');
      const ctx = canvas.getContext('2d');
      
      // Arka plan gradient
      const gradient = ctx.createLinearGradient(0, 0, canvas.width, canvas.height);
      gradient.addColorStop(0, '#f8f9ff');
      gradient.addColorStop(1, '#f0f4ff');
      ctx.fillStyle = gradient;
      ctx.fillRect(0, 0, canvas.width, canvas.height);

      // Grid çizgileri
      ctx.strokeStyle = 'rgba(102, 126, 234, 0.1)';
      ctx.lineWidth = 1;
      for (let i = 0; i <= canvas.width; i += 20) {
        ctx.beginPath();
        ctx.moveTo(i, 0);
        ctx.lineTo(i, canvas.height);
        ctx.stroke();
      }
      for (let i = 0; i <= canvas.height; i += 20) {
        ctx.beginPath();
        ctx.moveTo(0, i);
        ctx.lineTo(canvas.width, i);
        ctx.stroke();
      }

      const head = { x: state.snake[0].x + state.dx, y: state.snake[0].y + state.dy };
      
      // Çarpışma kontrolü
      if (head.x < 0 || head.x >= canvas.width || head.y < 0 || head.y >= canvas.height) { 
        endSnakeGame(); 
        return; 
      }
      if (state.snake.some(s => s.x === head.x && s.y === head.y)) { 
        endSnakeGame(); 
        return; 
      }
      
      state.snake.unshift(head);
      
      // Yemek yeme kontrolü
      if (head.x === state.food.x && head.y === state.food.y) { 
        state.score += 10; 
        updateSnakeDisplay();
        generateFood();
        createParticles();
      } else {
        state.snake.pop();
      }

      // Yılan çizimi (gelişmiş)
      state.snake.forEach((seg, i) => {
        if (i === 0) {
          // Baş - gradient ve gölge
          const headGradient = ctx.createRadialGradient(seg.x + 9, seg.y + 9, 2, seg.x + 9, seg.y + 9, 10);
          headGradient.addColorStop(0, '#2e7d32');
          headGradient.addColorStop(1, '#1b5e20');
          ctx.fillStyle = headGradient;
          ctx.shadowColor = 'rgba(46, 125, 50, 0.5)';
          ctx.shadowBlur = 8;
          ctx.fillRect(seg.x + 1, seg.y + 1, 18, 18);
          ctx.shadowBlur = 0;
          
          // Gözler
          ctx.fillStyle = '#fff';
          ctx.fillRect(seg.x + 4, seg.y + 4, 3, 3);
          ctx.fillRect(seg.x + 11, seg.y + 4, 3, 3);
          ctx.fillStyle = '#000';
          ctx.fillRect(seg.x + 5, seg.y + 5, 1, 1);
          ctx.fillRect(seg.x + 12, seg.y + 5, 1, 1);
        } else {
          // Vücut - gradient
          const bodyGradient = ctx.createLinearGradient(seg.x, seg.y, seg.x + 18, seg.y + 18);
          bodyGradient.addColorStop(0, '#4caf50');
          bodyGradient.addColorStop(1, '#388e3c');
          ctx.fillStyle = bodyGradient;
          ctx.fillRect(seg.x + 1, seg.y + 1, 18, 18);
          
          // Vücut deseni
          ctx.fillStyle = 'rgba(255, 255, 255, 0.2)';
          ctx.fillRect(seg.x + 3, seg.y + 3, 14, 2);
        }
      });

      // Yemek çizimi (animasyonlu)
      const time = Date.now() * 0.01;
      const pulseSize = 2 + Math.sin(time) * 1;
      const foodGradient = ctx.createRadialGradient(
        state.food.x + 9, state.food.y + 9, 2,
        state.food.x + 9, state.food.y + 9, 10 + pulseSize
      );
      foodGradient.addColorStop(0, '#ff5722');
      foodGradient.addColorStop(0.7, '#f44336');
      foodGradient.addColorStop(1, '#d32f2f');
      
      ctx.fillStyle = foodGradient;
      ctx.shadowColor = 'rgba(244, 67, 54, 0.6)';
      ctx.shadowBlur = 10;
      ctx.beginPath();
      ctx.arc(state.food.x + 9, state.food.y + 9, 8 + pulseSize, 0, Math.PI * 2);
      ctx.fill();
      ctx.shadowBlur = 0;
      
      // Yemek parlaması
      ctx.fillStyle = 'rgba(255, 255, 255, 0.8)';
      ctx.beginPath();
      ctx.arc(state.food.x + 6, state.food.y + 6, 2, 0, Math.PI * 2);
      ctx.fill();
    }

    function endSnakeGame() { 
      const state = gameStates.snake; 
      state.gameOver = true; 
      clearInterval(state.gameLoop); 
      state.gameLoop = null; 
      
      // Yüksek skor kontrolü
      if (state.score > snakeHighScore) {
        snakeHighScore = state.score;
        localStorage.setItem('snakeHighScore', snakeHighScore.toString());
        document.getElementById('snakeMessage').innerHTML = '<div class="win-message">🏆 Yeni Rekor! ' + languages[currentLanguage].gameOver + '</div>';
        createParticles();
      } else {
        document.getElementById('snakeMessage').innerHTML = '<div class="lose-message">' + languages[currentLanguage].gameOver + '</div>';
      }
      
      updateSnakeDisplay();
    }

    document.getElementById('newSnakeBtn').onclick = startNewSnakeGame;

    // --- PARÇACIK EFEKTİ ---
    function createParticles() {
      const container = document.querySelector('.game-container');
      for (let i = 0; i < 15; i++) {
        setTimeout(() => {
          const particle = document.createElement('div');
          particle.className = 'particle';
          particle.style.left = Math.random() * container.offsetWidth + 'px';
          particle.style.top = container.offsetHeight - 20 + 'px';
          particle.style.background = `radial-gradient(circle, hsl(${Math.random() * 360}, 70%, 60%), transparent)`;
          container.appendChild(particle);
          
          setTimeout(() => {
            particle.remove();
          }, 2000);
        }, i * 100);
      }
    }
  </script>
</body>

</html>
